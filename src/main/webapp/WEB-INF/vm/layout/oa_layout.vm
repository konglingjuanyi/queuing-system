<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>报销系统</title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <base href="/oaengine/"/>
    <!-- basic styles -->
    <link href="static/ace/css/bootstrap.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="static/ace/css/font-awesome.min.css"/>
    <!--[if IE 7]>
    <link rel="stylesheet" href="static/ace/css/font-awesome-ie7.min.css"/>
    <![endif]-->
    <!-- page specific plugin styles -->
    <!-- fonts -->
    <!--<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />-->
    <!-- ace styles -->
    <link rel="stylesheet" href="static/ace/css/ace.min.css"/>
    <link rel="stylesheet" href="static/ace/css/ace-rtl.min.css"/>
    <link rel="stylesheet" href="static/ace/css/ace-skins.min.css"/>
    <link rel="stylesheet" href="static/ace/css/dropzone.css"/>
    <link rel="stylesheet" href="static/ace/css/colorbox.css"/>
    <link rel="stylesheet" href="static/ace/css/jquery.qtip.min.css"/>
    <link rel="stylesheet" href="static/css/myplugin.css"/>


    <!--[if lte IE 8]>
    <link rel="stylesheet" href="static/ace/css/ace-ie.min.css"/>
    <![endif]-->
    <!-- inline styles related to this page -->
    <!-- ace settings handler -->
    <script src="static/ace/js/ace-extra.min.js"></script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="static/ace/js/html5shiv.js"></script>
    <script src="static/ace/js/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript">
        window.jQuery || document.write("<script src='static/ace/js/jquery-2.0.3.min.js'>" + "<" + "/script>");
    </script>

    <!--[if IE]>
    <script type="text/javascript">
        window.jQuery || document.write("<script src='static/ace/js/jquery-1.10.2.min.js'>" + "<" + "/script>");
    </script>
    <![endif]-->
    <script type="text/javascript">
        if ("ontouchend" in document) document.write("<script src='static/ace/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>
    <script src="static/ace/js/typeahead-bs2.min.js"></script>
    <!-- page specific plugin scripts -->
    <script src="static/ace/js/jquery.colorbox-min.js"></script>
    <link rel="stylesheet" href="static/ace/css/jquery-ui-1.10.3.full.min.css"/>
    <script src="static/ace/js/jquery-ui-1.10.3.full.min.js"></script>
    <script src="static/ace/js/jquery.ui.touch-punch.min.js"></script>
    <script src="static/ace/js/jquery.qtip.min.js"></script>
    <!-- ace scripts -->
    <script src="static/ace/js/ace-elements.min.js"></script>
    <script src="static/ace/js/ace.min.js"></script>
    <!-- inline scripts related to this page -->
    <script src="static/ace/js/dropzone.min.js"></script>

    <script src="static/MyPlugin/jquery-ui.1.10.3.full.my.js"></script>
##    <script src="static/MyPlugin/jquery.myplugin.js"></script>

</head>
<body>
<div class="navbar navbar-default" id="navbar">
    <script type="text/javascript">
        try {
            ace.settings.check('navbar', 'fixed')
        } catch (e) {
        }
    </script>
    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left">
					<span class="navbar-brand">
						<small>
                            报销系统
                        </small>
					</span>
        </div>
        <div class="navbar-header pull-right">
					<select id="user"><option>请选择当前登陆用户名</option></select>
        </div>
    </div>
</div>

<div class="main-container-inner">
    <div class="sidebar" id="sidebar">
        <ul class="nav nav-list">
            <li>
                <a href="oa/apply.html">
                    <span class="menu-text"> 员工报销申请 </span>
                </a>
            </li>
            <li>
                <a href="oa/draft.html">
                    <span class="menu-text"> 我的草稿 </span>
                </a>
            </li>
            <li>
                <a href="javascript:void(0);">
                    <span class="menu-text"> 我的申请 </span>
                </a>
                <ul class="submenu" style="display:block">
                    <li>
                        <a href="oa/apply_todo.html">
                            <i class="icon-double-angle-right"></i>
                            正在审批的申请
                        </a>
                    </li>
                    <li>
                        <a href="oa/apply_history.html">
                            <i class="icon-double-angle-right"></i>
                            已经结束的申请
                        </a>
                    </li>
                    <li>
                </ul>
            </li>
            <li>
                <a href="javascript:void(0);">
                    <span class="menu-text"> 我的审批 </span>
                </a>
                <ul class="submenu" style="display:block">
                    <li>
                        <a href="oa/approve_todo.html">
                            <i class="icon-double-angle-right"></i>
                            当前审批
                        </a>
                    </li>
                    <li>
                        <a href="oa/approve_history.html">
                            <i class="icon-double-angle-right"></i>
                            历史审批
                        </a>
                    </li>
                    <li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="main-content">
        <div class="page-content">
            <div class="row">
                <div class="col-xs-12">
                    $screen_content
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    jQuery(function ($) {

        try {
            $(".dropzone").dropzone({
                paramName: "file", // The name that will be used to transfer the file
                maxFilesize: 0.5, // MB

                addRemoveLinks: true,
                dictDefaultMessage: '<span class="bigger-150 bolder"><i class="icon-caret-right red"></i> Drop files</span> to upload \
<span class="smaller-80 grey">(or click)</span> <br /> \
<i class="upload-icon icon-cloud-upload blue icon-3x"></i>'
                ,
                dictResponseError: 'Error while uploading file!',

                //change the previewTemplate to use Bootstrap progress bars
                previewTemplate: "<div class=\"dz-preview dz-file-preview\">\n  <div class=\"dz-details\">\n    <div class=\"dz-filename\"><span data-dz-name></span></div>\n    <div class=\"dz-size\" data-dz-size></div>\n    <img data-dz-thumbnail />\n  </div>\n  <div class=\"progress progress-small progress-striped active\"><div class=\"progress-bar progress-bar-success\" data-dz-uploadprogress></div></div>\n  <div class=\"dz-success-mark\"><span></span></div>\n  <div class=\"dz-error-mark\"><span></span></div>\n  <div class=\"dz-error-message\"><span data-dz-errormessage></span></div>\n</div>"
            });
        } catch (e) {
            alert('Dropzone.js does not support older browsers!');
        }

        var userList = ["zhenqing.wang", "bin.sun", "zhen.pei", "nuby.zhang", "weidong.jiang"];
        for(var i = 0; i < userList.length; i++){
            $("#user").append($.parseStr('<option value="%s">%s</option>', userList[i], userList[i]));
        }
        $('#user').change(function () {
            var value = $("user").val();
            var params = {};
            var vars = {"user":value};
            params["vars"] = vars;
            $.ajax({
                contentType: "application/json; charset=utf-8",
                url: "oa/user",
                type: "post",
                data: JSON.stringify(params),
                success: function (resp) {
                    if (resp.errorCode == 0) {
                        showSuccessTips("切换用户名成功!");
//                        window.location.reload();
                    } else {
                        showCommonNoticeDialog('失败', 'icon-warning-sign',
                                generateNoticeMsg(resp.errorMessage), 300);
                    }
                },
                "error": function (jqxhr, textstatus, errorthrown) {
                    showResultDialog('网络错误', 'icon-warning-sign',
                            generateNoticeMsg('网络错误，请刷新后重试!'), 300);
                }
            });
        });

    });
    function showResultDialog(id, header, header_icon, msg, width) {
        $("#"+id).append(msg);
        var title_html_str = $.parseStr('<div class="dialog_title"><li class="%s"></li> %s</div>', header_icon, header);
        var edit_dialog = $("#"+id).removeClass('hide').dialog({
            modal: true,
            width: width,
            resizable: true,
            title: title_html_str,
            title_html: true,
            closeOnEscape: false,
            open: function(event, ui) {
                $(".ui-dialog-titlebar-close").hide();
            },
            buttons: [
                {
                    text: "确定",
                    "class" : "btn btn-primary btn-xs",
                    click: function(){
                        $("#"+id).empty();
                        $("#"+id).dialog('destroy');
                    }
                }
            ],
            close: function() {
                $("#"+id).empty();
                $("#"+id).dialog('destroy');
            }
        });
    }
</script>

</body>
</html>
