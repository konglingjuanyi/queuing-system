#set($layout = "layout/layout.vm")
<h3 class="header smaller lighter blue">流程定义列表</h3>
<table width="100%" class="table table-striped table-bordered table-hover">
		<thead>
			<tr>
				<td colspan="5">总数</td>
				<td colspan="6">$totalCount</td>
			</tr>
			<tr>
				<th>ProcessDefinitionId</th>
				<th>名称1</th>
				<th>KEY</th>
				<th>版本号</th>
				<th>XML</th>
				<th>图片</th>
				<th>部署时间</th>
				<th>实例数量</th>
				<th>任务数量</th>
				<th>状态</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			#foreach($object in $page)
				#set($process=$object[0])
				#set($deployment=$object[1])
				#set($count=$object[2])
				#set($taskCount=$object[3])
				<tr>
					<td>$process.id</td>
					<td>$process.name</td>
					<td>$process.key</td>
					<td>$process.version</td>
					<td><a target="_blank" href='admin/resource/read.html?processDefinitionId=$process.id&resourceType=xml'>查看</a></td>
					<td><a target="_blank" href='admin/resource/read.html?processDefinitionId=$process.id&resourceType=image'>查看</a></td>
					<td>$date.format("yyyy-MM-dd HH:mm:ss", $deployment.deploymentTime)</td>
					<td><a href='admin/$process.id/instance_list'>$count</a></td>
					<td>$taskCount</td>
					<td>#if($process.suspended)
						<span class="label label-sm label-warning">挂起</span>
						#else
						<span class="label label-sm label-success">活动</span>
						#end
					</td>
					<td>
						#if($process.suspended)
							<a href="admin/active/$process.id">激活</a>
						#else
							<a href="admin/suspend/$process.id">挂起</a>
						#end
                        <a href="javascript:onDelete('$process.deploymentId');">删除</a>
                    </td>
				</tr>
			#end
		</tbody>
	</table>
	<script src="assets/js/My97DatePicker/WdatePicker.js"></script>
<script language=JavaScript>
function onDelete(value){
	if (confirm("确认删除！")) window.location = "admin/delete?deploymentId=" + value ;
}
</script>